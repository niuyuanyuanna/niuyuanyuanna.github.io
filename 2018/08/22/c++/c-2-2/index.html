<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="友元、this指针、常量"><meta name="keywords" content="C++,北大课程"><meta name="author" content="NYY,undefined"><meta name="copyright" content="NYY"><title>友元、this指针、常量 | NYY's blog</title><link rel="shortcut icon" href="/img/my_icon.jpg"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#友元"><span class="toc-number">1.</span> <span class="toc-text">友元</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#友元函数"><span class="toc-number">1.1.</span> <span class="toc-text">友元函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#友元类"><span class="toc-number">1.2.</span> <span class="toc-text">友元类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#this指针"><span class="toc-number">2.</span> <span class="toc-text">this指针</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#this指针作用"><span class="toc-number">2.1.</span> <span class="toc-text">this指针作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this指针和静态成员函数"><span class="toc-number">2.2.</span> <span class="toc-text">this指针和静态成员函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常量及常引用"><span class="toc-number">3.</span> <span class="toc-text">常量及常引用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#常量对象"><span class="toc-number">3.1.</span> <span class="toc-text">常量对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常量成员函数"><span class="toc-number">3.2.</span> <span class="toc-text">常量成员函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常引用"><span class="toc-number">3.3.</span> <span class="toc-text">常引用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#测验"><span class="toc-number">4.</span> <span class="toc-text">测验</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#编程作业"><span class="toc-number">5.</span> <span class="toc-text">编程作业</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#程序填空"><span class="toc-number">5.1.</span> <span class="toc-text">程序填空</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#程序设计"><span class="toc-number">5.2.</span> <span class="toc-text">程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#描述"><span class="toc-number">5.2.1.</span> <span class="toc-text">描述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输入"><span class="toc-number">5.2.2.</span> <span class="toc-text">输入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#输出"><span class="toc-number">5.2.3.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码"><span class="toc-number">5.2.4.</span> <span class="toc-text">代码</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.jpg"></div><div class="author-info__name text-center">NYY</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="https://github.com/niuyuanyuanna" target="_blank">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">46</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">34</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">9</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">Links</div><a class="author-info-links__name text-center" href="https://www.ouyangsong.com" target="_blank">欧阳松的博客</a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://i.loli.net/2018/04/06/5ac70d2defba5.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">NYY's blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">友元、this指针、常量</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-22</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Programming-Language/">Programming Language</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2018/08/22/c++/c-2-2/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2018/08/22/c++/c-2-2/"></span></a><div class="post-meta-wordcount"><span>Word count: </span><span class="word-count">2,966</span><span class="post-meta__separator">|</span><span>Reading time: 12 min</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="友元"><a href="#友元" class="headerlink" title="友元"></a>友元</h1><h2 id="友元函数"><a href="#友元函数" class="headerlink" title="友元函数"></a>友元函数</h2><p>一个类的友元函数可以访问该类的私有成员</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCar</span>;</span> <span class="comment">//提前声明CCar类, 以便后面CDriver类使用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CDriver</span> &#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line"> 		<span class="function"><span class="keyword">void</span> <span class="title">ModifyCar</span><span class="params">(CCar * pCar)</span> </span>; <span class="comment">//改装汽车</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCar</span> &#123;</span></span><br><span class="line">	<span class="keyword">private</span>:</span><br><span class="line">		<span class="keyword">int</span> price;</span><br><span class="line"> 	<span class="function"><span class="keyword">friend</span> <span class="keyword">int</span> <span class="title">MostExpensiveCar</span><span class="params">(CCar cars[], <span class="keyword">int</span> total)</span></span>; <span class="comment">//声明友元</span></span><br><span class="line">	<span class="keyword">friend</span> <span class="keyword">void</span> CDriver::ModifyCar(CCar * pCar); <span class="comment">//声明友元</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//汽车改装后价值增加</span></span><br><span class="line"><span class="keyword">void</span> CDriver::ModifyCar(CCar * pCar)&#123;</span><br><span class="line">	pCar-&gt;price += <span class="number">1000</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//求最贵汽车的价格</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">MostExpensiveCar</span><span class="params">(CCar cars[], <span class="keyword">int</span> total)</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> tmpMax = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; total; ++i)&#123;</span><br><span class="line">        <span class="keyword">if</span>(cars[i].price &gt; tmpMax)</span><br><span class="line">            tmpMax = cars[i].price;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> tmpMax;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>还可以将一个类的成员函数定义为另一个类的友元函数</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">function</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">void</span> B::function();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种方式使得在class A中也可以通过class B的function访问到B的私有成员。</p>
<h2 id="友元类"><a href="#友元类" class="headerlink" title="友元类"></a>友元类</h2><p>类A如果是B的友元类，那么A的成员函数就可以访问B的私有成员</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CCar</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="keyword">int</span> price;</span><br><span class="line">    <span class="keyword">friend</span> <span class="class"><span class="keyword">class</span> <span class="title">CDiver</span>;</span>    <span class="comment">// 声明CDiver为友元类</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CDiver</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	CCar myCar;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">ModifyCar</span><span class="params">()</span></span>&#123;</span><br><span class="line">        	myCar.price += <span class="number">1000</span>; <span class="comment">//  CDriver是CCar的友元类,可以访问其私有成员</span></span><br><span class="line">    	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>友元类之间的关系不能传递，也无法继承，也就是如果A是B的友元，B是C的友元，那么不能说A是C的友元。</p>
<hr>
<h1 id="this指针"><a href="#this指针" class="headerlink" title="this指针"></a>this指针</h1><p>this指针的作用是指向成员函数所作用的对象。非静态成员函数中可以直接使用this来代表指向该函数作用的对象的指针。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Complex</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="keyword">double</span> real, imag;</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">()</span></span>&#123;<span class="built_in">cout</span>&lt;&lt;real&lt;&lt;<span class="string">","</span>&lt;&lt;imag;&#125;</span><br><span class="line">    Complex(<span class="keyword">double</span> r, <span class="keyword">double</span> i):real(r), imag(i)&#123;&#125;</span><br><span class="line">    <span class="function">Complex <span class="title">AddOne</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 因为this指针作用于当前指向的对象</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;real++;           <span class="comment">// 等价于 real++</span></span><br><span class="line">        <span class="keyword">this</span>-&gt;Print();          <span class="comment">// 等价于 Print()</span></span><br><span class="line">        <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>使用时：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Complex c1(1, 1), c2(0, 0);</span><br><span class="line">    c2 = c1.AddOne();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>c++编译时相当于需要把它转换成c语言，转换后的代码为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Complex</span>&#123;</span></span><br><span class="line">    <span class="keyword">double</span> real;</span><br><span class="line">    <span class="keyword">double</span> imag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Print</span><span class="params">(struct Complex *<span class="keyword">this</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">this</span>-&gt;real&lt;&lt;<span class="string">","</span>&lt;&lt;<span class="keyword">this</span>-&gt;imag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Complex</span><span class="params">(struct Complex *<span class="keyword">this</span>, <span class="keyword">double</span> r, <span class="keyword">double</span>, i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;real = r;</span><br><span class="line">    <span class="keyword">this</span>-&gt;imag = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">struct Complex <span class="title">AddOne</span><span class="params">(struct Complex *<span class="keyword">this</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;real++;</span><br><span class="line">    <span class="keyword">this</span>-&gt;Print(<span class="keyword">this</span>);</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Complex</span> <span class="title">complex1</span>;</span></span><br><span class="line">    Complex(&amp; complex1, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Complex</span> <span class="title">complex2</span>;</span></span><br><span class="line">    Complex(&amp; complex2, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    complex2 = AddOne(&amp; complex1);</span><br><span class="line">    Print(&amp; complex2);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在程序中c2的实部为2，虚部为1，输出结果为</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">2,1</span><br></pre></td></tr></table></figure>
<h2 id="this指针作用"><a href="#this指针作用" class="headerlink" title="this指针作用"></a>this指针作用</h2><p>在编译时，如果对象是空，即this指针作用的对象为NULL，</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        	<span class="built_in">cout</span>&lt;&lt;<span class="string">"Hello"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A *p = <span class="literal">NULL</span>;</span><br><span class="line">    p-&gt;Hello();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在编译时，如果对象是空，即this指针作用的对象为NULL，程序仍然会执行第10行代码<code>p-&gt;Hello()</code>程序，因为在编译时，翻译为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">(A * <span class="keyword">this</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Hello"</span>&lt;&lt;end</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A *p = <span class="literal">NULL</span>;</span><br><span class="line">    p-&gt;Hello(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这种情况下程序不会产生错误。</p>
<p>在下面的情况下，程序会出错：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        	<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">"Hello"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A *p = <span class="literal">NULL</span>;</span><br><span class="line">    p-&gt;Hello();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时，编译翻译为c语言时，变为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Hello</span><span class="params">(A * <span class="keyword">this</span>)</span></span>&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="keyword">this</span>-&gt;i&lt;&lt;<span class="string">"Hello"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A *p = <span class="literal">NULL</span>;</span><br><span class="line">    p-&gt;Hello(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里this是个空指针，因此<code>this-&gt;i</code>这句会编译错误。</p>
<h2 id="this指针和静态成员函数"><a href="#this指针和静态成员函数" class="headerlink" title="this指针和静态成员函数"></a>this指针和静态成员函数</h2><p>静态成员函数中不能使用this指针，因为静态成员函数不具体作用于某个对象，因此在翻译时，静态成员函数的真实的参数个数就是程序中写出的参数个数。</p>
<hr>
<h1 id="常量及常引用"><a href="#常量及常引用" class="headerlink" title="常量及常引用"></a>常量及常引用</h1><h2 id="常量对象"><a href="#常量对象" class="headerlink" title="常量对象"></a>常量对象</h2><p>如果不希望某个对象的值被改变，则定义该对象的时候可以在前面加const关键字。</p>
<p>如：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="keyword">int</span> value;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="function"><span class="keyword">void</span> <span class="title">SetValue</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> Demo Obj;              <span class="comment">// 常量对象</span></span><br></pre></td></tr></table></figure>
<p>obj初始化完成之后就无法再修改其值。</p>
<h2 id="常量成员函数"><a href="#常量成员函数" class="headerlink" title="常量成员函数"></a>常量成员函数</h2><p>在类的成员函数说明后面可以加const关键字，则该成员函数成为常量成员函数。</p>
<p>如：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span>&#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">		<span class="keyword">int</span> value;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">GetValue</span><span class="params">()</span> <span class="keyword">const</span></span>;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">()</span> </span>&#123; &#125;;</span><br><span class="line">		Sample() &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">void</span> Sample::GetValue() <span class="keyword">const</span>&#123;</span><br><span class="line">	value = <span class="number">0</span>; <span class="comment">// wrong</span></span><br><span class="line">	func(); <span class="comment">//wrong</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>常量成员函数执行期间不应修改其所作用的对象。因此，在常量成员函数中不能修改成员变量的值（静态成员变量除外），也不能调用同类的非常量成员函数(静态成员函数除外）。</p>
<p>在main函数中，常量对象用法：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> Sample sample;</span><br><span class="line">    sample.value = <span class="number">100</span>;   <span class="comment">// erro常量对象不可被修改 </span></span><br><span class="line">    sample.func();        <span class="comment">// erro常量对象不可调用非常量函数</span></span><br><span class="line">    sample.GetValue();    <span class="comment">// ok常量对象可以执行常量成员函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>两个成员函数，名字和参数表都一样，但是一个是const,一个不是，算重载。</p>
<p>如：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CTest</span>&#123;</span></span><br><span class="line">    <span class="keyword">private</span>:</span><br><span class="line">    	<span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	CTest()&#123;n=<span class="number">1</span>;&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">int</span> <span class="title">GetValue</span><span class="params">()</span> <span class="keyword">const</span> </span>&#123;<span class="keyword">return</span> n;&#125;</span><br><span class="line">    	<span class="function"><span class="keyword">int</span> <span class="title">GetValue</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> <span class="number">2</span> * n;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> CTest objTest1;</span><br><span class="line">    CTest objTest2;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;objTest1.GetValue()&lt;&lt;<span class="string">","</span>&lt;&lt;objTest2.GetValue();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1,2</span><br></pre></td></tr></table></figure>
<h2 id="常引用"><a href="#常引用" class="headerlink" title="常引用"></a>常引用</h2><p>引用前面可以加const关键字，称为常引用。不能通过常引用，修改其引用的变量。</p>
<p>如：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp; r = n;</span><br><span class="line">r = <span class="number">6</span>;    <span class="comment">// error</span></span><br><span class="line">n = <span class="number">4</span>;    <span class="comment">// ok</span></span><br></pre></td></tr></table></figure>
<p>常引用经常被用来作为函数的参数，因为在写函数的时候，若把对象作为函数参数，生成这个参数对象需要调用复制构造函数，增加了时间和空间的开销。因此，使用对象的引用作为参数，节省开销。</p>
<p>对象引用作为函数参数有一定的风险性，若函数中不小心修改了形参的值，那么实参也会发生改变，如果不想让实参发生变化，可以将形参写为<code>const Object &amp; o</code>可以确保不会出现无意中更改o值的语句。</p>
<hr>
<h1 id="测验"><a href="#测验" class="headerlink" title="测验"></a>测验</h1><ol start="3">
<li>以下关于 this 指针的说法中不正确的是：</li>
</ol>
<ul>
<li style="list-style: none"><input type="checkbox"> 在构造函数内部可以使用this指针</li>
<li style="list-style: none"><input type="checkbox"> 成员函数内的this 指针，指向成员函数所作用的对象</li>
<li style="list-style: none"><input type="checkbox" checked> const成员函数内部不可以使用this 指针</li>
<li style="list-style: none"><input type="checkbox"> 在析构函数内部可以使用 this 指针</li>
</ul>
<ol start="4">
<li>以下程序，哪个是不正确的？</li>
</ol>
<ul>
<li style="list-style: none"><input type="checkbox"> A</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span> <span class="keyword">int</span> v; &#125;;</span><br><span class="line">	A a; </span><br><span class="line">    a.v = <span class="number">3</span>; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> B</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span> <span class="keyword">public</span>: <span class="keyword">int</span> v; A * p;	&#125;;</span><br><span class="line">	A a; </span><br><span class="line">    a.p = &amp; a; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox"> C</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span> <span class="keyword">public</span>: <span class="keyword">int</span> v; &#125;;</span><br><span class="line">	A * p = <span class="keyword">new</span> A;</span><br><span class="line">	p-&gt;v = <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">delete</span> p;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li style="list-style: none"><input type="checkbox" checked> D</li>
</ul>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">A</span> &#123;</span> <span class="keyword">public</span>: <span class="keyword">int</span> v; A * p;	&#125;;</span><br><span class="line">	A a; </span><br><span class="line">    a.p = <span class="keyword">new</span> A; </span><br><span class="line">    <span class="keyword">delete</span> a.p;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="编程作业"><a href="#编程作业" class="headerlink" title="编程作业"></a>编程作业</h1><h2 id="程序填空"><a href="#程序填空" class="headerlink" title="程序填空"></a>程序填空</h2><ol>
<li>下面程序输出结果是：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">0</span><br><span class="line">5</span><br></pre></td></tr></table></figure>
<p>填空：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>&#123;</span></span><br><span class="line">    <span class="keyword">public</span>:</span><br><span class="line">    	<span class="keyword">int</span> val;</span><br><span class="line">    	<span class="comment">// 此处代码填空</span></span><br><span class="line">    	A(<span class="keyword">int</span> n=<span class="number">0</span>)&#123;val = n;&#125;</span><br><span class="line">    	<span class="function">A &amp; <span class="title">GetObj</span><span class="params">()</span></span>&#123;<span class="keyword">return</span> *<span class="keyword">this</span>;&#125;</span><br><span class="line">        <span class="comment">// 填空完成</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    A a;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a.val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    a.GetObj() = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;a.val&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>空缺处代码为：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">A(<span class="keyword">int</span> n=<span class="number">0</span>)&#123;</span><br><span class="line">    val = n;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">A &amp; <span class="title">GetObj</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>下面程序的输出是：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">10</span><br></pre></td></tr></table></figure>
<p>请补足Sample类的成员函数。不能增加成员变量。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sample</span>&#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">    	<span class="keyword">int</span> v;</span><br><span class="line">    	Sample(<span class="keyword">int</span> n):v(n) &#123; &#125;</span><br><span class="line">		<span class="comment">// 在此处补充你的代码</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Sample <span class="title">a</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    Sample b = a;     <span class="comment">// 初始化b，调用复制构造函数</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; b.v;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>空缺处代码为：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Sample(Sample &amp; o)&#123;</span><br><span class="line">    v = o.v * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>下面程序的输出结果是：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">5,5</span><br><span class="line">5,5</span><br></pre></td></tr></table></figure>
<p>请填空：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> &#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">    	<span class="keyword">int</span> k;</span><br><span class="line">   	 	Base(<span class="keyword">int</span> n):k(n) &#123; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Big</span> &#123;</span></span><br><span class="line">	<span class="keyword">public</span>:</span><br><span class="line">    	<span class="keyword">int</span> v; </span><br><span class="line">    	Base b;</span><br><span class="line">		<span class="comment">// 在此处补充你的代码</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">Big <span class="title">a1</span><span class="params">(<span class="number">5</span>)</span></span>; </span><br><span class="line">    Big a2 = a1;              <span class="comment">// 初始化a2，调用复制构造函数</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a1.v &lt;&lt; <span class="string">","</span> &lt;&lt; a1.b.k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; a2.v &lt;&lt; <span class="string">","</span> &lt;&lt; a2.b.k &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>空缺处代码为：</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">Big(<span class="keyword">int</span> n):v(n), b(n)&#123;&#125;      <span class="comment">// 初始化列表，对v,b初始化</span></span><br><span class="line"><span class="comment">// 下面这种方法会编译报错，编译器不知道如何对封闭类Big的Base对象b进行初始化</span></span><br><span class="line"><span class="comment">//Big(Big &amp; big)&#123;</span></span><br><span class="line"><span class="comment">//    v = big.v;</span></span><br><span class="line"><span class="comment">//    b = big.b;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="程序设计"><a href="#程序设计" class="headerlink" title="程序设计"></a>程序设计</h2><p>魔兽世界之一：备战</p>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><p>魔兽世界的西面是红魔军的司令部，东面是蓝魔军的司令部。两个司令部之间是依次排列的若干城市。</p>
<p>红司令部，City 1，City 2，……，City n，蓝司令部</p>
<p>两军的司令部都会制造武士。武士一共有 dragon 、ninja、iceman、lion、wolf 五种。每种武士都有编号、生命值、攻击力这三种属性。</p>
<p>双方的武士编号都是从1开始计算。红方制造出来的第n个武士，编号就是n。同样，蓝方制造出来的第n个武士，编号也是n。武士在刚降生的时候有一个生命值。在每个整点，双方的司令部中各有一个武士降生。</p>
<p>红方司令部按照iceman、lion、wolf、ninja、dragon的顺序循环制造武士。</p>
<p>蓝方司令部按照lion、dragon、ninja、iceman、wolf的顺序循环制造武士。</p>
<p>制造武士需要生命元。</p>
<p>制造一个初始生命值为m的武士，司令部中的生命元就要减少m个。</p>
<p>如果司令部中的生命元不足以制造某个按顺序应该制造的武士，那么司令部就试图制造下一个。如果所有武士都不能制造了，则司令部停止制造武士。</p>
<p>给定一个时间，和双方司令部的初始生命元数目，要求你将从0点0分开始到双方司令部停止制造武士为止的所有事件按顺序输出。</p>
<p>一共有两种事件，其对应的输出样例如下：</p>
<p>1) 武士降生</p>
<p>输出样例： 004 blue lion 5 born with strength 5,2 lion in blue headquarter</p>
<p>表示在4点整，编号为5的蓝魔lion武士降生，它降生时生命值为5，降生后蓝魔司令部里共有2个lion武士。（为简单起见，不考虑单词的复数形式）注意，每制造出一个新的武士，都要输出此时司令部里共有多少个该种武士。</p>
<p>2) 司令部停止制造武士</p>
<p>输出样例： 010 red headquarter stops making warriors</p>
<p>表示在10点整，红方司令部停止制造武士</p>
<p>输出事件时：</p>
<p>首先按时间顺序输出；</p>
<p>同一时间发生的事件，先输出红司令部的，再输出蓝司令部的。</p>
<h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><p>第一行是一个整数，代表测试数据组数。</p>
<p>每组测试数据共两行。</p>
<p>第一行：一个整数M。其含义为， 每个司令部一开始都有M个生命元( 1 &lt;= M &lt;= 10000)。</p>
<p>第二行：五个整数，依次是 dragon 、ninja、iceman、lion、wolf 的初始生命值。它们都大于0小于等于10000。</p>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">1</span><br><span class="line">20</span><br><span class="line">3 4 5 6 7</span><br></pre></td></tr></table></figure>
<h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><p>对每组测试数据，要求输出从0时0分开始，到双方司令部都停止制造武士为止的所有事件。</p>
<p>对每组测试数据，首先输出”Case:n” n是测试数据的编号，从1开始 。</p>
<p>接下来按恰当的顺序和格式输出所有事件。每个事件都以事件发生的时间开头，时间以小时为单位，有三位。</p>
<p>例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Case:1</span><br><span class="line">000 red iceman 1 born with strength 5,1 iceman in red headquarter</span><br><span class="line">000 blue lion 1 born with strength 6,1 lion in blue headquarter</span><br><span class="line">001 red lion 2 born with strength 6,1 lion in red headquarter</span><br><span class="line">001 blue dragon 2 born with strength 3,1 dragon in blue headquarter</span><br><span class="line">002 red wolf 3 born with strength 7,1 wolf in red headquarter</span><br><span class="line">002 blue ninja 3 born with strength 4,1 ninja in blue headquarter</span><br><span class="line">003 red headquarter stops making warriors</span><br><span class="line">003 blue iceman 4 born with strength 5,1 iceman in blue headquarter</span><br><span class="line">004 blue headquarter stops making warriors</span><br></pre></td></tr></table></figure>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Warrior</span>&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">string</span> color;</span><br><span class="line">    <span class="keyword">int</span> HP;</span><br><span class="line">    Warrior(<span class="built_in">string</span> c, <span class="keyword">int</span> i)&#123;</span><br><span class="line">        color = c;</span><br><span class="line">        HP = HPs[i]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dragon</span>:</span> <span class="keyword">public</span> Warrior&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Dragon(<span class="built_in">string</span> color):warrior(color, <span class="number">0</span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ninja</span>:</span> <span class="keyword">public</span> Warrior&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Ninja(<span class="built_in">string</span> color):warrior(color, <span class="number">1</span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iceman</span>:</span> <span class="keyword">public</span> Warrior&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Iceman(<span class="built_in">string</span> color):warrior(color, <span class="number">2</span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lion</span>:</span> <span class="keyword">public</span> Warrior&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Lion(<span class="built_in">string</span> color):warrior(color, <span class="number">3</span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Wolf</span>:</span> <span class="keyword">public</span> Warrior&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Wolf(<span class="built_in">string</span> color):warrior(color, <span class="number">4</span>)&#123;&#125;</span><br><span class="line">    </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Headquart</span>&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">int</span> power;</span><br><span class="line">    <span class="built_in">string</span> color;</span><br><span class="line">    <span class="keyword">int</span> numberOfWarriors;</span><br><span class="line">    <span class="keyword">bool</span> carryOn;</span><br><span class="line">    <span class="keyword">int</span> each[<span class="number">5</span>];</span><br><span class="line">    <span class="keyword">int</span> current;</span><br><span class="line">    <span class="keyword">int</span> selectType;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Headquart(<span class="keyword">int</span> p, <span class="built_in">string</span> c)&#123;</span><br><span class="line">        color = c;</span><br><span class="line">        power = p;</span><br><span class="line">        carrayOn = <span class="literal">true</span>;</span><br><span class="line">        numberOfWarriors = <span class="number">0</span>;</span><br><span class="line">        current = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">            each[i] = <span class="number">0</span>;</span><br><span class="line">        &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">getCarrayOn</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> carrayOn;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">create</span><span class="params">(<span class="built_in">string</span> c)</span></span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;c;</span><br><span class="line">        <span class="keyword">int</span> HPOrder[<span class="number">5</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">5</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>( c==<span class="string">"red"</span> )</span><br><span class="line">                HPOrder[i] = HPs[redOrder[i]];</span><br><span class="line">            <span class="keyword">if</span> (c==<span class="string">"blue"</span>)</span><br><span class="line">                HPOrder[i] = HPs[blueOrder[i]];</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">if</span>(power &lt; minHP)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"headquarter stops making warriors"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            carryOn = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(power &gt;= minHP)&#123;</span><br><span class="line">            <span class="keyword">if</span>(power &gt;= HPOrder[current])</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span>(current == <span class="number">4</span>)</span><br><span class="line">                current = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                current++;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">"red"</span>)</span><br><span class="line">            select = redOrder[current];</span><br><span class="line">        <span class="keyword">if</span>(c == <span class="string">"blue"</span>)</span><br><span class="line">            select = blueOrder[current];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">string</span> warriors[<span class="number">5</span>] = &#123; <span class="string">" dragon "</span>,<span class="string">" ninja "</span>,<span class="string">" iceman "</span>,<span class="string">" lion "</span>,<span class="string">" wolf "</span> &#125;;</span><br><span class="line">        <span class="keyword">switch</span>(select)&#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                <span class="keyword">new</span> Dragon(c);</span><br><span class="line">                each[<span class="number">0</span>]++;</span><br><span class="line">                power = power - HPs[<span class="number">0</span>];</span><br><span class="line">                <span class="comment">// TODO  这里优化</span></span><br><span class="line">                </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">NYY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2018/08/22/c++/c-2-2/">http://yoursite.com/2018/08/22/c++/c-2-2/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C/">C++</a><a class="post-meta__tags" href="/tags/北大课程/">北大课程</a></div><div class="social-share"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script><nav id="pagination"><div class="prev-post pull-left"><a href="/2018/11/08/offer_problem/leedcode4/"><i class="fa fa-chevron-left">  </i><span>leedcode4</span></a></div><div class="next-post pull-right"><a href="/2018/08/21/c++/c-2-1/"><span>类成员变量</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://yoursite.com/2018/08/22/c++/c-2-2/';
  this.page.identifier = '2018/08/22/c++/c-2-2/';
  this.page.title = '友元、this指针、常量';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'niuyuanyuan' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-src" src="https://niuyuanyuan.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By NYY</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  }
});
</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
  var all = MathJax.Hub.getAllJax(), i;
  for (i=0; i < all.length; i += 1) {
    all[i].SourceElement().parentNode.className += ' has-jax';
  }
});
</script><script src="https://cdn.jsdelivr.net/npm/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>